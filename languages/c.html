<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C语言 练习详情 - LiQian</title>
    <link rel="stylesheet" href="../css/practice.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <div class="container">
        <nav class="navbar">
            <a href="../code_practice.html" class="nav-brand">
                <i class="fas fa-arrow-left"></i> 返回练习库
            </a>
        </nav>

        <section class="hero-section">
            <h1><i class="fab fa-c"></i> C语言 编程练习</h1>
            <p>算法实现、数据结构练习和日常编码挑战</p>
        </section>

        <div style="padding: 2rem;">
            <!-- 代码示例区域 -->
            <div class="code-section">
				<h3><i class="fas fa-code"></i> 2026.01.15力扣网习题</h3>
                <pre><code class="language-C">
#include stdio.h
#include stdlib.h
#include assert.h

//2026.01.15力扣网刷题
//3769. 二进制反射排序——数组、排序、第479场周赛——简单
//给你一个整数数组 nums。
//二进制反射 是对一个 正整数 的二进制表示按顺序反转（忽略前导零）后，将反转得到的二进制数转为十进制的结果。
//请按每个元素的二进制反射值的 升序 对数组进行排序。如果两个不同的数字具有相同的二进制反射值，则 较小 的原始数字应排在前面。
//返回排序后的数组。
//示例 1：
//输入： nums = [4, 5, 4]
//输出：[4, 4, 5]
//解释：
//二进制反射值为：
//4 -> (二进制)100 -> (反转)001 -> 1
//5 -> (二进制)101 -> (反转)101 -> 5
//4 -> (二进制)100 -> (反转)001 -> 1
//根据反射值排序为[4, 4, 5]。
//示例 2：
//输入： nums = [3, 6, 5, 8]
//输出：[8, 3, 6, 5]
//解释：
//二进制反射值为：
//3 -> (二进制)11 -> (反转)11 -> 3
//6 -> (二进制)110 -> (反转)011 -> 3
//5 -> (二进制)101 -> (反转)101 -> 5
//8 -> (二进制)1000 -> (反转)0001 -> 1
//根据反射值排序为[8, 3, 6, 5]。
//注意，3 和 6 的反射值相同，因此需要按原始值的升序排列。
//提示：
//1 <= nums.length <= 100
//1 <= nums[i] <= 10^9

typedef struct Hash {
    int data;
    int bin_to_dec;
} Hash;
int b_to_d(int n) {
	// 十进制转二进制反射再转十进制
	int rev = 0;
	while (n) {
		rev = (rev << 1) | (n & 1);
		n >>= 1;
	}
    return rev;
}
int cmp_hash(const void* a, const void* b) {
	Hash* hash_a = (Hash*)a;
	Hash* hash_b = (Hash*)b;
	if (hash_a->bin_to_dec != hash_b->bin_to_dec) {
		return hash_a->bin_to_dec - hash_b->bin_to_dec;
	} else {
		return hash_a->data - hash_b->data;
	}
}
int* sortByReflection(int* nums, int numsSize, int* returnSize) {
    *returnSize = numsSize;
    int* ans = (int*)calloc(numsSize, sizeof(int));
    assert(ans);
	Hash* hash = (Hash*)calloc(numsSize, sizeof(Hash));
	assert(hash);
	for (int i = 0; i < numsSize; i++) {
		hash[i].data = nums[i];
		hash[i].bin_to_dec = b_to_d(nums[i]);
	}
	qsort(hash, numsSize, sizeof(Hash), cmp_hash);
	for (int i = 0; i < numsSize; i++) {
		ans[i] = hash[i].data;
	}
	free(hash);
	hash = NULL;
    return ans;
}

# 测试示例
int main(){
    int nums[5] = {1, 2, 1, 1, 3};
    int pi = 0;
    int* res = sortByReflection(nums, 5, &pi);
	printf("[");
    for(int i = 0; i < pi; i++){
        if(i < pi - 1){
            printf("%d, ", res[i]);
        }
        else{
            printf("%d");
        }
    }
	printf("]");
    free(res);
    res = NULL;
    return 0;
}
</code></pre>
            </div>

            <!-- 项目信息 -->
            <div class="project-info" style="margin-top: 2rem;">
                <h3><i class="fas fa-info-circle"></i> 项目信息</h3>
                <div class="repo-links">
                    <a href="https://gitee.com/Li_2023-9-13/daily_practice_c"
                       target="_blank" class="repo-link gitee">
                        <i class="fas fa-code"></i> Gitee 仓库
                    </a>
                    <a href="https://github.com/LiQian2023/daily_practice_c"
                       target="_blank" class="repo-link github">
                        <i class="fab fa-github"></i> GitHub 镜像
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- 代码高亮 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="../js/practice.js"></script>
</body>
</html>